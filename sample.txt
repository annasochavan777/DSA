import requests
from requests.auth import HTTPBasicAuth

# Replace these with your details
base_url = "https://your-bitbucket-url/rest/api/latest/projects/{projectKey}/repos/{repositorySlug}/raw/{filePath}"
username = "your-username"
password = "your-password"  # Or access token
branch = "main"  # Branch name
file_path = "path/to/your/file.txt"

# Construct the URL
url = base_url.format(
    projectKey="your-project-key",
    repositorySlug="your-repository-slug",
    filePath=file_path,
)

# Add query parameters for branch
params = {"at": branch}

try:
    # Make the request
    response = requests.get(url, params=params, auth=HTTPBasicAuth(username, password))
    
    # Check if the request was successful
    if response.status_code == 200:
        content = response.text
        print("File Content:")
        print(content)
    else:
        print(f"Failed to fetch file. Status Code: {response.status_code}")
        print("Error:", response.json())

except Exception as e:
    print("An error occurred:", str(e))
